# ğŸš€ Infraestrutura AWS com Terraform

## ğŸ“Œ VisÃ£o Geral
Este projeto utiliza **Terraform** para provisionar uma infraestrutura bÃ¡sica na AWS, incluindo uma instÃ¢ncia **EC2** configurada automaticamente para rodar o servidor **Nginx**.

---

## ğŸ“œ **DescriÃ§Ã£o TÃ©cnica**

### ğŸ— **Tarefa 1: Infraestrutura AWS**

ğŸ”¹ **Provider**: Configura o provedor AWS para a regiÃ£o `us-east-1`.

ğŸ”¹ **VariÃ¡veis**: Define variÃ¡veis para o nome do projeto e do candidato.

ğŸ”¹ **Key Pair**: Cria um par de chaves SSH para acessar a instÃ¢ncia.

ğŸ”¹ **VPC**: Cria uma rede privada (`10.0.0.0/16`).

ğŸ”¹ **Subnet**: Define uma sub-rede (`10.0.1.0/24`) na zona `us-east-1a`.

ğŸ”¹ **Internet Gateway**: Permite acesso Ã  internet.

ğŸ”¹ **Route Table**: Configura rotas para saÃ­da via `Internet Gateway`.

ğŸ”¹ **Security Group**: Permite trÃ¡fego SSH (`22`) e libera todo trÃ¡fego de saÃ­da.

ğŸ”¹ **InstÃ¢ncia EC2**:
  - AMI mais recente do **Debian 12**.
  - Tipo **t2.micro**.
  - 20GB de armazenamento **GP2**.
  - ConfiguraÃ§Ã£o da chave SSH.
  - Script de inicializaÃ§Ã£o (`user_data`) para atualizaÃ§Ã£o do sistema.
  - 
ğŸ”¹ **Outputs**:
  - `private_key`: Chave privada gerada (**sensÃ­vel**).
  - `ec2_public_ip`: IP pÃºblico da instÃ¢ncia.

## ObservaÃ§Ãµes Adicionais:

### Boas prÃ¡ticas de seguranÃ§a:

- O security group permite SSH (porta 22) de qualquer lugar (0.0.0.0/0). Em um ambiente de produÃ§Ã£o, seria mais seguro limitar o acesso SSH a IPs ou ranges especÃ­ficos.

- A chave privada Ã© exposta como um output. Embora marcada como sensÃ­vel, Ã© uma prÃ¡tica que deve ser usada com cautela, especialmente em ambientes de produÃ§Ã£o.

- Gerenciamento de estado:

- O cÃ³digo nÃ£o especifica um backend para armazenamento do estado do Terraform. Em um cenÃ¡rio de equipe ou produÃ§Ã£o, seria recomendÃ¡vel usar um backend remoto como S3 com DynamoDB para lock.

### Flexibilidade e reutilizaÃ§Ã£o:

- Mais variÃ¡veis poderiam ser utilizadas para tornar o cÃ³digo mais flexÃ­vel, como CIDR blocks, tipo de instÃ¢ncia, etc.

- Considerar o uso de mÃ³dulos para componentes reutilizÃ¡veis como VPC, que poderiam ser compartilhados entre diferentes projetos.

### ResiliÃªncia e alta disponibilidade:

- A infraestrutura estÃ¡ limitada a uma Ãºnica zona de disponibilidade. Para maior resiliÃªncia, considerar usar mÃºltiplas AZs.

### Custos e otimizaÃ§Ã£o:

- A instÃ¢ncia t2.micro Ã© boa para testes, mas para um ambiente de produÃ§Ã£o, seria importante avaliar as necessidades de performance e custo.

### ManutenÃ§Ã£o e atualizaÃ§Ãµes:

- O user data realiza uma atualizaÃ§Ã£o do sistema, o que Ã© bom. Considerar adicionar mais passos de configuraÃ§Ã£o ou usar uma ferramenta de gerenciamento de configuraÃ§Ã£o para setups mais complexos.

### Nomenclatura e organizaÃ§Ã£o:

- O cÃ³digo usa uma boa prÃ¡tica de nomenclatura consistente com variÃ¡veis para projeto e candidato.

- Para projetos maiores, considerar dividir o cÃ³digo em mÃºltiplos arquivos .tf para melhor organizaÃ§Ã£o.

### ğŸ”§ **Tarefa 2: Melhorias Aplicadas**

#### ğŸ–¥ï¸ **AutomaÃ§Ã£o da InstalaÃ§Ã£o e InicializaÃ§Ã£o do Nginx**
âœ… O **User Data** foi atualizado para:
  - Atualizar pacotes (`apt-get update -y && apt-get upgrade -y`).
  - Instalar o **Nginx** (`apt-get install -y nginx`).
  - Habilitar **inicializaÃ§Ã£o automÃ¡tica** (`systemctl enable nginx`).
  - Iniciar o serviÃ§o (`systemctl start nginx`).

âœ… **Resultado esperado**: O **Nginx** serÃ¡ instalado e iniciado automaticamente, permitindo acesso via **IP pÃºblico** da instÃ¢ncia.

#### ğŸ”’ **SeguranÃ§a Aprimorada**
âœ… **Security Group** atualizado:
  - LiberaÃ§Ã£o da porta **80** para acesso HTTP.
  - RestriÃ§Ãµes no **SSH** (acesso apenas para IPs especÃ­ficos).
âœ… **Criptografia** ativada no volume de armazenamento da instÃ¢ncia.

âœ… **Resultado esperado**:
  - Acesso HTTP permitido (Nginx visÃ­vel no navegador).
  - Maior proteÃ§Ã£o dos dados armazenados.

#### ğŸ” **Outras Melhorias**
âœ… **Backup AutomÃ¡tico**: AWS Backup configurado para snapshots diÃ¡rios.
âœ… **Monitoramento**: ConfiguraÃ§Ã£o de logs do **Nginx** no **CloudWatch Logs**.
âœ… **CÃ³digo mais organizado**: Segue boas prÃ¡ticas do Terraform.

---

## ğŸ“– **InstruÃ§Ãµes de Uso**

### 1ï¸âƒ£ **PrÃ©-requisitos**

Antes de executar o cÃ³digo, certifique-se de ter:
- âœ… **Conta AWS** configurada corretamente.
- âœ… **AWS CLI** instalada e autenticada (`aws configure`).
- âœ… **Terraform** instalado (`terraform -v` para verificar).
- âœ… **IP PÃšBLICO** do seu computador (para liberar SSH, edite `MEU_IP/32`).

### 2ï¸âƒ£ **Passos para Executar o Terraform**

#### ğŸ“Œ **Passo 1 â€“ Configurar as Credenciais AWS**
```sh
aws configure
```
Insira a **Access Key, Secret Key, RegiÃ£o e Formato de saÃ­da**.

#### ğŸ“Œ **Passo 2 â€“ Inicializar o Terraform**
```sh
terraform init
```
Isso inicializa o Terraform e baixa os provedores necessÃ¡rios.

#### ğŸ“Œ **Passo 3 â€“ Validar a ConfiguraÃ§Ã£o**
```sh
terraform validate
```
Verifica se hÃ¡ erros antes da aplicaÃ§Ã£o.

#### ğŸ“Œ **Passo 4 â€“ Visualizar as MudanÃ§as**
```sh
terraform plan
```
Exibe o que serÃ¡ criado antes da execuÃ§Ã£o.

#### ğŸ“Œ **Passo 5 â€“ Aplicar a Infraestrutura**
```sh
terraform apply -auto-approve
```
Cria os recursos na AWS.

#### ğŸ“Œ **Passo 6 â€“ Acessar a InstÃ¢ncia EC2**
```sh
ssh -i private-key.pem admin@IP_PUBLICO
```
Substitua **`private-key.pem`** pela chave gerada e **`IP_PUBLICO`** pelo IP da saÃ­da do Terraform.

#### ğŸ“Œ **Passo 7 â€“ Testar o Nginx**
No navegador, acesse:
```sh
http://IP_PUBLICO
```
Se tudo estiver certo, a **pÃ¡gina padrÃ£o do Nginx** serÃ¡ exibida! ğŸ‰

---

## ğŸ”„ **Como Remover a Infraestrutura**
Para destruir todos os recursos provisionados, execute:
```sh
terraform destroy -auto-approve
```
âš ï¸ **Isso apagarÃ¡ a instÃ¢ncia EC2, VPC e demais recursos!**

---

## ğŸ¯ **ConclusÃ£o**

Este projeto automatiza a criaÃ§Ã£o de uma infraestrutura AWS segura e funcional com **Terraform**, instalando e configurando o **Nginx** automaticamente. AlÃ©m disso, foram aplicadas **melhorias de seguranÃ§a, backup e monitoramento**.

Caso tenha dÃºvidas ou queira contribuir, fique Ã  vontade para abrir um **issue** ou um **pull request**! ğŸš€

